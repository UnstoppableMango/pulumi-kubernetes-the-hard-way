23c23
<   const packageJson = JSON.parse(fs.readFileSync("package.json", "utf-8"));
---
>   const packageJson = JSON.parse(fs.readFileSync(path.join(__dirname, "..", "..", "cmd", "pulumi-resource-kubernetes-the-hard-way", "package.json"), "utf-8"));
34,35c34,36
<   addRef("aws");
<   addRef("docker");
---
>   addRef("command");
>   addRef("random");
>   addRef("tls");
74c75
<           ...path.slice(0, -1),
---
>           ...path.filter(x => !['index', resourceName].includes(x)),
84d84
<       path.pop(); // Last section is same as the resource name
86c86,93
<         [externalRef.name, ...path, resourceName].join("."),
---
>         [
>           externalRef.name,
>           ...path.filter(x => ![
>             'index',
>             resourceName.toLowerCase(),
>           ].includes(x.toLowerCase())),
>           resourceName,
>         ].join("."),
578,579c585,586
<   schema: "../schema.json",
<   out: "schema-types.ts",
---
>   schema: path.join(__dirname, "..", "..", "cmd", "pulumi-resource-kubernetes-the-hard-way", "schema.json"),
>   out: path.join(__dirname, "..", "..", "cmd", "pulumi-resource-kubernetes-the-hard-way", "schema-types.ts"),
